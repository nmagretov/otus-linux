Ð¡ÐºÑ€Ð¸Ð¿Ñ‚ Ð·Ð°Ð¿ÑƒÑ‰ÐµÐ½ Ð’Ñ‚ 02 Ð¸ÑŽÐ½ 2020 22:08:52
]0;root@centos7:~[?1034h[root@centos7 ~]# 
]0;root@centos7:~[root@centos7 ~]# 
]0;root@centos7:~[root@centos7 ~]# ls /usr/lib/dracut/modules.d/
[0m[38;5;27m00bash[0m               [38;5;27m40network[0m   [38;5;27m90dm[0m                  [38;5;27m90qemu[0m        [38;5;27m95fcoe-uefi[0m     [38;5;27m95udev-rules[0m   [38;5;27m98systemd[0m
[38;5;27m00systemd-bootchart[0m  [38;5;27m45ifcfg[0m     [38;5;27m90dmraid[0m              [38;5;27m90qemu-net[0m    [38;5;27m95fstab-sys[0m     [38;5;27m95virtfs[0m       [38;5;27m98usrmount[0m
[38;5;27m03modsign[0m            [38;5;27m45url-lib[0m   [38;5;27m90dmsquash-live[0m       [38;5;27m91crypt-gpg[0m   [38;5;27m95iscsi[0m         [38;5;27m95zfcp[0m         [38;5;27m99base[0m
[38;5;27m03rescue[0m             [38;5;27m50drm[0m       [38;5;27m90dmsquash-live-ntfs[0m  [38;5;27m91crypt-loop[0m  [38;5;27m95nbd[0m           [38;5;27m95znet[0m         [38;5;27m99fs-lib[0m
[38;5;27m04watchdog[0m           [38;5;27m50plymouth[0m  [38;5;27m90kernel-modules[0m      [38;5;27m95cifs[0m        [38;5;27m95nfs[0m           [38;5;27m97biosdevname[0m  [38;5;27m99img-lib[0m
[38;5;27m05busybox[0m            [38;5;27m80cms[0m       [38;5;27m90livenet[0m             [38;5;27m95dasd[0m        [38;5;27m95resume[0m        [38;5;27m98ecryptfs[0m     [38;5;27m99kdumpbase[0m
[38;5;27m05nss-softokn[0m        [38;5;27m90bcache[0m    [38;5;27m90lvm[0m                 [38;5;27m95dasd_mod[0m    [38;5;27m95rootfs-block[0m  [38;5;27m98pollcdrom[0m    [38;5;27m99microcode_ctl-fw_dir_override[0m
[38;5;27m10i18n[0m               [38;5;27m90btrfs[0m     [38;5;27m90mdraid[0m              [38;5;27m95debug[0m       [38;5;27m95ssh-client[0m    [38;5;27m98selinux[0m      [38;5;27m99shutdown[0m
[38;5;27m30convertfs[0m          [38;5;27m90crypt[0m     [38;5;27m90multipath[0m           [38;5;27m95fcoe[0m        [38;5;27m95terminfo[0m      [38;5;27m98syslog[0m       [38;5;27m99uefi-lib[0m
]0;root@centos7:~[root@centos7 ~]# 
]0;root@centos7:~[root@centos7 ~]# 
]0;root@centos7:~[root@centos7 ~]# 
]0;root@centos7:~[root@centos7 ~]# mkdir /usr/lib/dracut/modules.d/01test
]0;root@centos7:~[root@centos7 ~]# 
]0;root@centos7:~[root@centos7 ~]# 
]0;root@centos7:~[root@centos7 ~]# 
]0;root@centos7:~[root@centos7 ~]# cd mkdir /usr/lib/dracut/modules.d/01test
bash: cd: mkdir: ÐÐµÑ‚ Ñ‚Ð°ÐºÐ¾Ð³Ð¾ Ñ„Ð°Ð¹Ð»Ð° Ð¸Ð»Ð¸ ÐºÐ°Ñ‚Ð°Ð»Ð¾Ð³Ð°
]0;root@centos7:~[root@centos7 ~]# cd mkdir /usr/lib/dracut/modules.d/01test[1P /usr/lib/dracut/modules.d/01test[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[1P /usr/lib/dracut/modules.d/01test[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[1P /usr/lib/dracut/modules.d/01test[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[1P /usr/lib/dracut/modules.d/01test[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[1P /usr/lib/dracut/modules.d/01test[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[1P/usr/lib/dracut/modules.d/01test[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C
]0;root@centos7:/usr/lib/dracut/modules.d/01test[root@centos7 01test]# 
]0;root@centos7:/usr/lib/dracut/modules.d/01test[root@centos7 01test]# 
]0;root@centos7:/usr/lib/dracut/modules.d/01test[root@centos7 01test]# vi module-setup.sh
[?1049h[?1h=[1;38r[?12;25h[?12l[?25h[27m[m[H[2J[?25l[38;1H"module-setup.sh" [New File][2;1H[94m~                                                                                                                                                [3;1H~                                                                                                                                                [4;1H~                                                                                                                                                [5;1H~                                                                                                                                                [6;1H~                                                                                                                                                [7;1H~                                                                                                                                                [8;1H~                                                                                                                                                [9;1H~                                                                                                                                                [10;1H~                                                                                                                                                [11;1H~                                                                                                                                                [12;1H~                                                                                                                                                [13;1H~                                                                                                                                                [14;1H~                                                                                                                                                [15;1H~                                                                                                                                                [16;1H~                                                                                                                                                [17;1H~                                                                                                                                                [18;1H~                                                                                                                                                [19;1H~                                                                                                                                                [20;1H~                                                                                                                                                [21;1H~                                                                                                                                                [22;1H~                                                                                                                                                [23;1H~                                                                                                                                                [24;1H~                                                                                                                                                [25;1H~                                                                                                                                                [26;1H~                                                                                                                                                [27;1H~                                                                                                                                                [28;1H~                                                                                                                                                [29;1H~                                                                                                                                                [30;1H~                                                                                                                                                [31;1H~                                                                                                                                                [32;1H~                                                                                                                                                [33;1H~                                                                                                                                                [34;1H~                                                                                                                                                [35;1H~                                                                                                                                                [36;1H~                                                                                                                                                [37;1H~                                                                                                                                                [1;1H[?12l[?25h[?25l[m[38;1H[97m[41mE348: No string under cursor[1;1H[?12l[?25h[?25l[m[38;1H[K[38;1H/bin/bash[38;5H[K[38;1H[31msearch hit BOTTOM, continuing at TOP[m[97m[41mE486: Pattern not found: bin[m[38;29H[K[1;1H[?12l[?25h[?25l[38;1H[1m-- INSERT --[m[38;13H[K[1;1Heck() {
    return 0[2;13H[K[3;1H}[3;2H[K[4;1H[K[5;1Hdepends() {[5;12H[K[6;1H    return 0[6;13H[K[7;1H}[7;2H[K[8;1H[K[9;1Hinstall() {[9;12H[K[10;1H    inst_hook cleanup 00 "${moddir}/test.sh"[10;45H[K[11;1H}[11;2H[K[11;2H[?12l[?25h[38;1H[K[11;1H[?25l[?12l[?25h[?25l[38;1H:[?12l[?25hwq[?25l"module-setup.sh" [New] 11L, 111C written
[?1l>[?12l[?25h[?1049l]0;root@centos7:/usr/lib/dracut/modules.d/01test[root@centos7 01test]# 
]0;root@centos7:/usr/lib/dracut/modules.d/01test[root@centos7 01test]# 
]0;root@centos7:/usr/lib/dracut/modules.d/01test[root@centos7 01test]# vi test.sh
[?1049h[?1h=[1;38r[?12;25h[?12l[?25h[27m[m[H[2J[?25l[38;1H"test.sh" [New File][2;1H[94m~                                                                                                                                                [3;1H~                                                                                                                                                [4;1H~                                                                                                                                                [5;1H~                                                                                                                                                [6;1H~                                                                                                                                                [7;1H~                                                                                                                                                [8;1H~                                                                                                                                                [9;1H~                                                                                                                                                [10;1H~                                                                                                                                                [11;1H~                                                                                                                                                [12;1H~                                                                                                                                                [13;1H~                                                                                                                                                [14;1H~                                                                                                                                                [15;1H~                                                                                                                                                [16;1H~                                                                                                                                                [17;1H~                                                                                                                                                [18;1H~                                                                                                                                                [19;1H~                                                                                                                                                [20;1H~                                                                                                                                                [21;1H~                                                                                                                                                [22;1H~                                                                                                                                                [23;1H~                                                                                                                                                [24;1H~                                                                                                                                                [25;1H~                                                                                                                                                [26;1H~                                                                                                                                                [27;1H~                                                                                                                                                [28;1H~                                                                                                                                                [29;1H~                                                                                                                                                [30;1H~                                                                                                                                                [31;1H~                                                                                                                                                [32;1H~                                                                                                                                                [33;1H~                                                                                                                                                [34;1H~                                                                                                                                                [35;1H~                                                                                                                                                [36;1H~                                                                                                                                                [37;1H~                                                                                                                                                [1;1H[?12l[?25h[?25l[m[38;1H[1m-- INSERT --[m[38;13H[K[1;1H[?12l[?25h[?25l#!/bin/bash[2;1H[K[3;1Hexec 0<>/dev/console 1<>/dev/console 2<>/dev/console[3;53H[K[4;1Hcat <<'msgend'[4;15H[K[5;1HHello! You are in dracut module![5;33H[K[6;1H ___________________[6;21H[K[7;1H< I'm dracut module >[7;22H[K[8;1H -------------------[8;21H[K[9;1H   \[9;5H[K[10;1H    \[10;6H[K[11;1H        .--.[11;13H[K[12;1H       |o_o |[12;14H[K[13;1H       |:_/ |[13;14H[K[14;1H      //   \ \[14;15H[K[15;1H     (|     | )[15;16H[K[16;1H    /'\_   _/`\[16;16H[K[17;1H    \___)=(___/[17;16H[K[18;1Hmsgend[18;7H[K[19;1Hsleep 10[19;9H[K[20;1Hecho " continuing...."[20;23H[K[20;23H[?12l[?25h[38;1H[K[20;22H[?25l[?12l[?25h[?25l[38;1H:[?12l[?25hwq[?25l"test.sh" [New] 20L, 332C written
[?1l>[?12l[?25h[?1049l]0;root@centos7:/usr/lib/dracut/modules.d/01test[root@centos7 01test]# 
]0;root@centos7:/usr/lib/dracut/modules.d/01test[root@centos7 01test]# chown +x 8.[K[K*.sh
chown: Ð½ÐµÐ²ÐµÑ€Ð½Ñ‹Ð¹ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ: Â«+xÂ»
]0;root@centos7:/usr/lib/dracut/modules.d/01test[root@centos7 01test]# chown +x *.sh[1P[1P[1P[1@m[1@o[1@d
]0;root@centos7:/usr/lib/dracut/modules.d/01test[root@centos7 01test]# 
]0;root@centos7:/usr/lib/dracut/modules.d/01test[root@centos7 01test]# 
]0;root@centos7:/usr/lib/dracut/modules.d/01test[root@centos7 01test]# 
]0;root@centos7:/usr/lib/dracut/modules.d/01test[root@centos7 01test]# ls -l
Ð¸Ñ‚Ð¾Ð³Ð¾ 8
-rwxr-xr-x. 1 root root 111 Ð¸ÑŽÐ½  2 22:10 [0m[38;5;34mmodule-setup.sh[0m
-rwxr-xr-x. 1 root root 332 Ð¸ÑŽÐ½  2 22:10 [38;5;34mtest.sh[0m
]0;root@centos7:/usr/lib/dracut/modules.d/01test[root@centos7 01test]# 
]0;root@centos7:/usr/lib/dracut/modules.d/01test[root@centos7 01test]# 
]0;root@centos7:/usr/lib/dracut/modules.d/01test[root@centos7 01test]# mkinitrd -f -v /boot/initramfs-$(uname -r).img $(uname -r)
Executing: /usr/sbin/dracut -f -v /boot/initramfs-3.10.0-1127.8.2.el7.x86_64.img 3.10.0-1127.8.2.el7.x86_64
dracut module 'modsign' will not be installed, because command 'keyctl' could not be found!
dracut module 'busybox' will not be installed, because command 'busybox' could not be found!
dracut module 'crypt' will not be installed, because command 'cryptsetup' could not be found!
dracut module 'dmraid' will not be installed, because command 'dmraid' could not be found!
dracut module 'dmsquash-live-ntfs' will not be installed, because command 'ntfs-3g' could not be found!
dracut module 'mdraid' will not be installed, because command 'mdadm' could not be found!
dracut module 'multipath' will not be installed, because command 'multipath' could not be found!
dracut module 'cifs' will not be installed, because command 'mount.cifs' could not be found!
dracut module 'iscsi' will not be installed, because command 'iscsistart' could not be found!
dracut module 'iscsi' will not be installed, because command 'iscsi-iname' could not be found!
95nfs: Could not find any command of 'rpcbind portmap'!
dracut module 'modsign' will not be installed, because command 'keyctl' could not be found!
dracut module 'busybox' will not be installed, because command 'busybox' could not be found!
dracut module 'crypt' will not be installed, because command 'cryptsetup' could not be found!
dracut module 'dmraid' will not be installed, because command 'dmraid' could not be found!
dracut module 'dmsquash-live-ntfs' will not be installed, because command 'ntfs-3g' could not be found!
dracut module 'mdraid' will not be installed, because command 'mdadm' could not be found!
dracut module 'multipath' will not be installed, because command 'multipath' could not be found!
dracut module 'cifs' will not be installed, because command 'mount.cifs' could not be found!
dracut module 'iscsi' will not be installed, because command 'iscsistart' could not be found!
dracut module 'iscsi' will not be installed, because command 'iscsi-iname' could not be found!
95nfs: Could not find any command of 'rpcbind portmap'!
*** Including module: bash ***
*** Including module: test ***
*** Including module: nss-softokn ***
*** Including module: i18n ***
*** Including module: network ***
*** Including module: ifcfg ***
*** Including module: drm ***
*** Including module: plymouth ***
*** Including module: dm ***
Skipping udev rule: 64-device-mapper.rules
Skipping udev rule: 60-persistent-storage-dm.rules
Skipping udev rule: 55-dm.rules
*** Including module: kernel-modules ***
*** Including module: lvm ***
Skipping udev rule: 64-device-mapper.rules
Skipping udev rule: 56-lvm.rules
Skipping udev rule: 60-persistent-storage-lvm.rules
*** Including module: qemu ***
*** Including module: resume ***
*** Including module: rootfs-block ***
*** Including module: terminfo ***
*** Including module: udev-rules ***
Skipping udev rule: 40-redhat-cpu-hotplug.rules
Skipping udev rule: 91-permissions.rules
*** Including module: biosdevname ***
*** Including module: systemd ***
*** Including module: usrmount ***
*** Including module: base ***
*** Including module: fs-lib ***
*** Including module: microcode_ctl-fw_dir_override ***
  microcode_ctl module: mangling fw_dir
    microcode_ctl: reset fw_dir to "/lib/firmware/updates /lib/firmware"
    microcode_ctl: processing data directory  "/usr/share/microcode_ctl/ucode_with_caveats/intel"...
intel: model '', path ' intel-ucode/*', kvers ''
intel: blacklist ''
    microcode_ctl: intel: Host-Only mode is enabled and ucode name does not match the expected one, skipping caveat ("microcode_amd_fam17h.bin" not in " intel-ucode/*")
    microcode_ctl: processing data directory  "/usr/share/microcode_ctl/ucode_with_caveats/intel-06-2d-07"...
intel-06-2d-07: model 'GenuineIntel 06-2d-07', path ' intel-ucode/06-2d-07', kvers ''
intel-06-2d-07: blacklist ''
intel-06-2d-07: caveat is disabled in configuration
    microcode_ctl: kernel version "3.10.0-1127.8.2.el7.x86_64" failed early load check for "intel-06-2d-07", skipping
    microcode_ctl: processing data directory  "/usr/share/microcode_ctl/ucode_with_caveats/intel-06-4f-01"...
intel-06-4f-01: model 'GenuineIntel 06-4f-01', path ' intel-ucode/06-4f-01', kvers ' 4.17.0 3.10.0-894 3.10.0-862.6.1 3.10.0-693.35.1 3.10.0-514.52.1 3.10.0-327.70.1 2.6.32-754.1.1 2.6.32-573.58.1 2.6.32-504.71.1 2.6.32-431.90.1 2.6.32-358.90.1'
intel-06-4f-01: blacklist ''
intel-06-4f-01: caveat is disabled in configuration
    microcode_ctl: kernel version "3.10.0-1127.8.2.el7.x86_64" failed early load check for "intel-06-4f-01", skipping
    microcode_ctl: processing data directory  "/usr/share/microcode_ctl/ucode_with_caveats/intel-06-55-04"...
intel-06-55-04: model 'GenuineIntel 06-55-04', path ' intel-ucode/06-55-04', kvers ''
intel-06-55-04: blacklist ''
intel-06-55-04: caveat is disabled in configuration
    microcode_ctl: kernel version "3.10.0-1127.8.2.el7.x86_64" failed early load check for "intel-06-55-04", skipping
    microcode_ctl: final fw_dir: "/lib/firmware/updates /lib/firmware"
*** Including module: shutdown ***
*** Including modules done ***
*** Installing kernel module dependencies and firmware ***
*** Installing kernel module dependencies and firmware done ***
*** Resolving executable dependencies ***
*** Resolving executable dependencies done***
*** Hardlinking files ***
*** Hardlinking files done ***
*** Stripping files ***
*** Stripping files done ***
*** Generating early-microcode cpio image contents ***
*** Constructing AuthenticAMD.bin ****
*** Store current command line parameters ***
*** Creating image file ***
*** Creating microcode section ***
*** Created microcode section ***
*** Creating image file done ***
*** Creating initramfs image file '/boot/initramfs-3.10.0-1127.8.2.el7.x86_64.img' done ***
]0;root@centos7:/usr/lib/dracut/modules.d/01test[root@centos7 01test]# 
]0;root@centos7:/usr/lib/dracut/modules.d/01test[root@centos7 01test]# 
]0;root@centos7:/usr/lib/dracut/modules.d/01test[root@centos7 01test]# dracut -f -v
Executing: /usr/sbin/dracut -f -v
dracut module 'modsign' will not be installed, because command 'keyctl' could not be found!
dracut module 'busybox' will not be installed, because command 'busybox' could not be found!
dracut module 'crypt' will not be installed, because command 'cryptsetup' could not be found!
dracut module 'dmraid' will not be installed, because command 'dmraid' could not be found!
dracut module 'dmsquash-live-ntfs' will not be installed, because command 'ntfs-3g' could not be found!
dracut module 'mdraid' will not be installed, because command 'mdadm' could not be found!
dracut module 'multipath' will not be installed, because command 'multipath' could not be found!
dracut module 'cifs' will not be installed, because command 'mount.cifs' could not be found!
dracut module 'iscsi' will not be installed, because command 'iscsistart' could not be found!
dracut module 'iscsi' will not be installed, because command 'iscsi-iname' could not be found!
95nfs: Could not find any command of 'rpcbind portmap'!
dracut module 'modsign' will not be installed, because command 'keyctl' could not be found!
dracut module 'busybox' will not be installed, because command 'busybox' could not be found!
dracut module 'crypt' will not be installed, because command 'cryptsetup' could not be found!
dracut module 'dmraid' will not be installed, because command 'dmraid' could not be found!
dracut module 'dmsquash-live-ntfs' will not be installed, because command 'ntfs-3g' could not be found!
dracut module 'mdraid' will not be installed, because command 'mdadm' could not be found!
dracut module 'multipath' will not be installed, because command 'multipath' could not be found!
dracut module 'cifs' will not be installed, because command 'mount.cifs' could not be found!
dracut module 'iscsi' will not be installed, because command 'iscsistart' could not be found!
dracut module 'iscsi' will not be installed, because command 'iscsi-iname' could not be found!
95nfs: Could not find any command of 'rpcbind portmap'!
*** Including module: bash ***
*** Including module: test ***
*** Including module: nss-softokn ***
*** Including module: i18n ***
*** Including module: network ***
*** Including module: ifcfg ***
*** Including module: drm ***
*** Including module: plymouth ***
*** Including module: dm ***
Skipping udev rule: 64-device-mapper.rules
Skipping udev rule: 60-persistent-storage-dm.rules
Skipping udev rule: 55-dm.rules
*** Including module: kernel-modules ***
*** Including module: lvm ***
Skipping udev rule: 64-device-mapper.rules
Skipping udev rule: 56-lvm.rules
Skipping udev rule: 60-persistent-storage-lvm.rules
*** Including module: qemu ***
*** Including module: resume ***
*** Including module: rootfs-block ***
*** Including module: terminfo ***
*** Including module: udev-rules ***
Skipping udev rule: 40-redhat-cpu-hotplug.rules
Skipping udev rule: 91-permissions.rules
*** Including module: biosdevname ***
*** Including module: systemd ***
*** Including module: usrmount ***
*** Including module: base ***
*** Including module: fs-lib ***
*** Including module: microcode_ctl-fw_dir_override ***
  microcode_ctl module: mangling fw_dir
    microcode_ctl: reset fw_dir to "/lib/firmware/updates /lib/firmware"
    microcode_ctl: processing data directory  "/usr/share/microcode_ctl/ucode_with_caveats/intel"...
intel: model '', path ' intel-ucode/*', kvers ''
intel: blacklist ''
    microcode_ctl: intel: Host-Only mode is enabled and ucode name does not match the expected one, skipping caveat ("microcode_amd_fam17h.bin" not in " intel-ucode/*")
    microcode_ctl: processing data directory  "/usr/share/microcode_ctl/ucode_with_caveats/intel-06-2d-07"...
intel-06-2d-07: model 'GenuineIntel 06-2d-07', path ' intel-ucode/06-2d-07', kvers ''
intel-06-2d-07: blacklist ''
intel-06-2d-07: caveat is disabled in configuration
    microcode_ctl: kernel version "3.10.0-1127.8.2.el7.x86_64" failed early load check for "intel-06-2d-07", skipping
    microcode_ctl: processing data directory  "/usr/share/microcode_ctl/ucode_with_caveats/intel-06-4f-01"...
intel-06-4f-01: model 'GenuineIntel 06-4f-01', path ' intel-ucode/06-4f-01', kvers ' 4.17.0 3.10.0-894 3.10.0-862.6.1 3.10.0-693.35.1 3.10.0-514.52.1 3.10.0-327.70.1 2.6.32-754.1.1 2.6.32-573.58.1 2.6.32-504.71.1 2.6.32-431.90.1 2.6.32-358.90.1'
intel-06-4f-01: blacklist ''
intel-06-4f-01: caveat is disabled in configuration
    microcode_ctl: kernel version "3.10.0-1127.8.2.el7.x86_64" failed early load check for "intel-06-4f-01", skipping
    microcode_ctl: processing data directory  "/usr/share/microcode_ctl/ucode_with_caveats/intel-06-55-04"...
intel-06-55-04: model 'GenuineIntel 06-55-04', path ' intel-ucode/06-55-04', kvers ''
intel-06-55-04: blacklist ''
intel-06-55-04: caveat is disabled in configuration
    microcode_ctl: kernel version "3.10.0-1127.8.2.el7.x86_64" failed early load check for "intel-06-55-04", skipping
    microcode_ctl: final fw_dir: "/lib/firmware/updates /lib/firmware"
*** Including module: shutdown ***
*** Including modules done ***
*** Installing kernel module dependencies and firmware ***
*** Installing kernel module dependencies and firmware done ***
*** Resolving executable dependencies ***
*** Resolving executable dependencies done***
*** Hardlinking files ***
*** Hardlinking files done ***
*** Stripping files ***
*** Stripping files done ***
*** Generating early-microcode cpio image contents ***
*** Constructing AuthenticAMD.bin ****
*** Store current command line parameters ***
*** Creating image file ***
*** Creating microcode section ***
*** Created microcode section ***
*** Creating image file done ***
*** Creating initramfs image file '/boot/initramfs-3.10.0-1127.8.2.el7.x86_64.img' done ***
]0;root@centos7:/usr/lib/dracut/modules.d/01test[root@centos7 01test]# dracut -f -v[K
]0;root@centos7:/usr/lib/dracut/modules.d/01test[root@centos7 01test]# 
]0;root@centos7:/usr/lib/dracut/modules.d/01test[root@centos7 01test]# 
]0;root@centos7:/usr/lib/dracut/modules.d/01test[root@centos7 01test]# 
]0;root@centos7:/usr/lib/dracut/modules.d/01test[root@centos7 01test]# lsinitrd -m /boot/initramfs-$(uname -r).img | grep test
[01;31m[Ktest[m[K
]0;root@centos7:/usr/lib/dracut/modules.d/01test[root@centos7 01test]# vi/et[K[K[K /etc/[K[K[K[K[K/etc/grub.d/40_custom [K[K[Kom 
[?1049h[?1h=[1;38r[?12;25h[?12l[?25h[27m[m[H[2J[?25l[38;1H"/etc/grub.d/40_custom" 5L, 214C[1;1H#!/bin/sh
exec tail -n +3 $0
# This file provides an easy way to add custom menu entries.  Simply type the
# menu entries you want to add after this comment.  Be careful not to change
# the 'exec tail' line above.
[94m~                                                                                                                                                [7;1H~                                                                                                                                                [8;1H~                                                                                                                                                [9;1H~                                                                                                                                                [10;1H~                                                                                                                                                [11;1H~                                                                                                                                                [12;1H~                                                                                                                                                [13;1H~                                                                                                                                                [14;1H~                                                                                                                                                [15;1H~                                                                                                                                                [16;1H~                                                                                                                                                [17;1H~                                                                                                                                                [18;1H~                                                                                                                                                [19;1H~                                                                                                                                                [20;1H~                                                                                                                                                [21;1H~                                                                                                                                                [22;1H~                                                                                                                                                [23;1H~                                                                                                                                                [24;1H~                                                                                                                                                [25;1H~                                                                                                                                                [26;1H~                                                                                                                                                [27;1H~                                                                                                                                                [28;1H~                                                                                                                                                [29;1H~                                                                                                                                                [30;1H~                                                                                                                                                [31;1H~                                                                                                                                                [32;1H~                                                                                                                                                [33;1H~                                                                                                                                                [34;1H~                                                                                                                                                [35;1H~                                                                                                                                                [36;1H~                                                                                                                                                [37;1H~                                                                                                                                                [1;1H[?12l[?25h[?25l[m[38;1H[K[38;1H:[?12l[?25hq[?25l[38;1H[K[38;1H[?1l>[?12l[?25h[?1049l]0;root@centos7:/usr/lib/dracut/modules.d/01test[root@centos7 01test]# vi /etc/default/grub
[?1049h[?1h=[1;38r[?12;25h[?12l[?25h[27m[m[H[2J[?25l[38;1H"/etc/default/grub" 7L, 283C[1;1HGRUB_TIMEOUT=5
GRUB_DISTRIBUTOR="$(sed 's, release .*$,,g' /etc/system-release)"
GRUB_DEFAULT=saved
GRUB_DISABLE_SUBMENU=true
GRUB_TERMINAL_OUTPUT="console"
GRUB_CMDLINE_LINUX="crashkernel=auto rd.lvm.lv=OtusRoot/root rd.lvm.lv=OtusRoot/swap rhgb quiet"
GRUB_DISABLE_RECOVERY="true"
[94m~                                                                                                                                                [9;1H~                                                                                                                                                [10;1H~                                                                                                                                                [11;1H~                                                                                                                                                [12;1H~                                                                                                                                                [13;1H~                                                                                                                                                [14;1H~                                                                                                                                                [15;1H~                                                                                                                                                [16;1H~                                                                                                                                                [17;1H~                                                                                                                                                [18;1H~                                                                                                                                                [19;1H~                                                                                                                                                [20;1H~                                                                                                                                                [21;1H~                                                                                                                                                [22;1H~                                                                                                                                                [23;1H~                                                                                                                                                [24;1H~                                                                                                                                                [25;1H~                                                                                                                                                [26;1H~                                                                                                                                                [27;1H~                                                                                                                                                [28;1H~                                                                                                                                                [29;1H~                                                                                                                                                [30;1H~                                                                                                                                                [31;1H~                                                                                                                                                [32;1H~                                                                                                                                                [33;1H~                                                                                                                                                [34;1H~                                                                                                                                                [35;1H~                                                                                                                                                [36;1H~                                                                                                                                                [37;1H~                                                                                                                                                [1;1H[?12l[?25h




[95C[mt[?25lrhgb quiet"[6;96H[K[6;85H[?12l[?25h[?25lhgb quiet"[6;95H[K[6;85H[?12l[?25h[?25lgb quiet"[6;94H[K[6;85H[?12l[?25h[?25lb quiet"[6;93H[K[6;85H[?12l[?25h[?25l quiet"[6;92H[K[6;85H[?12l[?25h[?25lquiet"[6;91H[K[6;85H[?12l[?25h[?25luiet"[6;90H[K[6;85H[?12l[?25h[?25liet"[6;89H[K[6;85H[?12l[?25h[?25let"[6;88H[K[6;85H[?12l[?25h[?25lt"[6;87H[K[6;85H[?12l[?25h[?25l"[6;86H[K[6;85H[?12l[?25h[?25l[38;1H[K[38;1H:[?12l[?25hwq[?25l"/etc/default/grub" 7L, 272C written
[?1l>[?12l[?25h[?1049l]0;root@centos7:/usr/lib/dracut/modules.d/01test[root@centos7 01test]# grub2-mkconfig -o /boot/grub2/grub.cfg[K[Kfg 
Generating grub configuration file ...
Found linux image: /boot/vmlinuz-3.10.0-1127.8.2.el7.x86_64
Found initrd image: /boot/initramfs-3.10.0-1127.8.2.el7.x86_64.img
Found linux image: /boot/vmlinuz-3.10.0-1062.el7.x86_64
Found initrd image: /boot/initramfs-3.10.0-1062.el7.x86_64.img
Found linux image: /boot/vmlinuz-0-rescue-fd7d0d381b0b564bbba7244ddb93c6dd
Found initrd image: /boot/initramfs-0-rescue-fd7d0d381b0b564bbba7244ddb93c6dd.img
done
]0;root@centos7:/usr/lib/dracut/modules.d/01test[root@centos7 01test]# exit 
exit

Ð¡ÐºÑ€Ð¸Ð¿Ñ‚ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½ Ð’Ñ‚ 02 Ð¸ÑŽÐ½ 2020 22:25:11
